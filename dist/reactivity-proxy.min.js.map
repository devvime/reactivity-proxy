{"version":3,"file":"reactivity-proxy.min.js","mappings":"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","sources":["webpack://reactivity-proxy/webpack/bootstrap","webpack://reactivity-proxy/webpack/runtime/define property getters","webpack://reactivity-proxy/webpack/runtime/hasOwnProperty shorthand","webpack://reactivity-proxy/./lib/ReactivityProxy.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export class ReactivityProxy {\n\n  constructor() {\n    this.state = new Proxy(\n      {},\n      {\n        set:(target, property, value) => {\n          target[property] = value;\n          this.resolve()\n          return true;\n        }\n      }\n    );\n    this.handleClick()\n    this.handleChange()\n  }\n\n  handleText() {\n    const setElementTextOrSrc = (itemPath, value) => {\n      let elements = document.querySelectorAll(`[data-${itemPath.join('-')}]`);\n      elements.forEach(el => {\n        if (el.hasAttribute('src')) {\n          el.setAttribute('src', value);\n        } else {\n          el.innerText = value;\n        }\n      });\n    };\n  \n    const processObject = (obj, path = []) => {\n      Object.keys(obj).forEach(key => {\n        const newPath = [...path, key];\n        if (typeof obj[key] === 'object' && obj[key] !== null) {\n          processObject(obj[key], newPath); // chamada recursiva para objetos aninhados\n        } else {\n          setElementTextOrSrc(newPath, obj[key]);\n        }\n      });\n    };\n  \n    processObject(this.state);\n  }\n  \n\n  handleClick() {\n    document.querySelectorAll('[data-click]').forEach(element => {\n      element.addEventListener('click', () => {\n        try {\n          const functionName = element.getAttribute('data-click');\n          const fn = new Function('state', `return ${functionName}`)(this.state);\n          if (typeof fn === 'function') fn();\n        } catch (error) {\n          console.error(\"Erro em data-click:\", error);\n        }\n      });\n    });\n  }\n\n  handleChange() {\n    document.querySelectorAll('[data-change]').forEach(element => {\n      element.addEventListener('input', event => {\n        try {\n          const functionName = element.getAttribute('data-change');\n          const fn = new Function('state', `return ${functionName}`)(this.state);\n          if (typeof fn === 'function') fn(event.target.value);\n        } catch (error) {\n          console.error(\"Erro em data-change:\", error);\n        }\n      });\n    });\n  }\n\n  handleConditional() {\n    document.querySelectorAll('[data-if]').forEach(element => {\n      try {\n        const condition = new Function('state', `return ${element.getAttribute('data-if')}`);\n        element.style.display = condition(this.state) ? '' : 'none';\n      } catch (error) {\n        console.error(\"Erro em data-if:\", error);\n      }\n    });\n  }\n\n  handleEach() {\n    document.querySelectorAll('[data-for]').forEach(item => {\n      const output = [];\n      const tpl = item.innerHTML;\n      const expression = item.getAttribute('data-for').split(' of ');\n      const data = eval('this.' + expression[1]);\n  \n      if (!data) return;\n  \n      data.map(itemData => {\n        const itemTpl = this.createElement(tpl);\n        itemTpl.removeAttribute('data-for');\n  \n        const processObject = (obj, path = []) => {\n          Object.keys(obj).forEach(key => {\n            const newPath = [...path, key];\n            if (typeof obj[key] === 'object' && obj[key] !== null) {\n              processObject(obj[key], newPath);\n            } else {\n              const selector = `[data-${expression[0]}-${newPath.join('-')}]`;\n              itemTpl.querySelectorAll(selector).forEach(e => {\n                if (e.hasAttribute('src')) {\n                  e.setAttribute('src', obj[key]);\n                } else {\n                  e.innerText = obj[key];\n                }\n              });\n            }\n          });\n        };\n  \n        processObject(itemData);\n        output.push(itemTpl);\n      });\n  \n      item.innerHTML = '';\n      output.forEach(el => item.appendChild(el));\n    });\n  }  \n\n  createElement(html) {\n    const template = document.createElement(\"template\")\n    template.innerHTML = html.trim()\n    return template.content.firstElementChild\n  }\n\n  set(value) {\n    this.state = value\n    this.resolve()\n  }\n\n  change(name, value) {\n    this.state[name] = value\n    this.resolve()\n  }\n\n  push(name, value) {\n    this.state[name].push(value)\n    this.resolve()\n  }\n\n  get() {\n    return this.state\n  }\n\n  resolve() {\n    this.handleText()\n    this.handleConditional()\n    this.handleEach()\n  }\n\n}"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","ReactivityProxy","constructor","this","state","Proxy","set","target","property","value","resolve","handleClick","handleChange","handleText","processObject","path","keys","forEach","newPath","setElementTextOrSrc","itemPath","document","querySelectorAll","join","el","hasAttribute","setAttribute","innerText","element","addEventListener","functionName","getAttribute","fn","Function","error","console","event","handleConditional","condition","style","display","handleEach","item","output","tpl","innerHTML","expression","split","data","eval","map","itemData","itemTpl","createElement","removeAttribute","selector","e","push","appendChild","html","template","trim","content","firstElementChild","change","name"],"sourceRoot":""}