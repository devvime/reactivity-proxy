{"version":3,"file":"reactivity-proxy.min.js","mappings":"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","sources":["webpack://reactivity-proxy/webpack/bootstrap","webpack://reactivity-proxy/webpack/runtime/define property getters","webpack://reactivity-proxy/webpack/runtime/hasOwnProperty shorthand","webpack://reactivity-proxy/webpack/runtime/make namespace object","webpack://reactivity-proxy/./lib/ReactivityProxy.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export class ReactivityProxy {\n\n  constructor() {\n    this.state = new Proxy(\n      {},\n      {\n        set:(target, property, value) => {\n          target[property] = value;\n          this.resolve()\n          return true;\n        }\n      }\n    );\n    this.handleClick()\n    this.handleChange()\n  }\n\n  handleText() {\n    const setElementTextOrSrc = (itemPath, value) => {\n      let elements = document.querySelectorAll(`[data-${itemPath.join('-')}]`);\n      elements.forEach(el => {\n        if (el.hasAttribute('src')) {\n          el.setAttribute('src', value);\n        } else {\n          el.innerText = value;\n        }\n      });\n    };\n  \n    const processObject = (obj, path = []) => {\n      Object.keys(obj).forEach(key => {\n        const newPath = [...path, key];\n        if (typeof obj[key] === 'object' && obj[key] !== null) {\n          processObject(obj[key], newPath); // chamada recursiva para objetos aninhados\n        } else {\n          setElementTextOrSrc(newPath, obj[key]);\n        }\n      });\n    };\n  \n    processObject(this.state);\n  }\n  \n\n  handleClick() {\n    document.querySelectorAll('[data-click]').forEach(element => {\n      element.addEventListener('click', () => {\n        try {\n          const functionName = element.getAttribute('data-click');\n          const fn = new Function('state', `return ${functionName}`)(this.state);\n          if (typeof fn === 'function') fn();\n        } catch (error) {\n          console.error(\"Erro em data-click:\", error);\n        }\n      });\n    });\n  }\n\n  handleChange() {\n    document.querySelectorAll('[data-change]').forEach(element => {\n      element.addEventListener('input', event => {\n        try {\n          const functionName = element.getAttribute('data-change');\n          const fn = new Function('state', `return ${functionName}`)(this.state);\n          if (typeof fn === 'function') fn(event.target.value);\n        } catch (error) {\n          console.error(\"Erro em data-change:\", error);\n        }\n      });\n    });\n  }\n\n  handleConditional() {\n    document.querySelectorAll('[data-if]').forEach(element => {\n      try {\n        const condition = new Function('state', `return ${element.getAttribute('data-if')}`);\n        element.style.display = condition(this.state) ? '' : 'none';\n      } catch (error) {\n        console.error(\"Erro em data-if:\", error);\n      }\n    });\n  }\n\n  handleEach() {\n    document.querySelectorAll('[data-for]').forEach(item => {\n      const output = [];\n      const tpl = item.innerHTML;\n      const expression = item.getAttribute('data-for').split(' of ');\n      const data = eval('this.' + expression[1]);\n  \n      if (!data) return;\n  \n      data.map(itemData => {\n        const itemTpl = this.createElement(tpl);\n        itemTpl.removeAttribute('data-for');\n  \n        const processObject = (obj, path = []) => {\n          Object.keys(obj).forEach(key => {\n            const newPath = [...path, key];\n            if (typeof obj[key] === 'object' && obj[key] !== null) {\n              processObject(obj[key], newPath);\n            } else {\n              const selector = `[data-${expression[0]}-${newPath.join('-')}]`;\n              itemTpl.querySelectorAll(selector).forEach(e => {\n                if (e.hasAttribute('src')) {\n                  e.setAttribute('src', obj[key]);\n                } else {\n                  e.innerText = obj[key];\n                }\n              });\n            }\n          });\n        };\n  \n        processObject(itemData);\n        output.push(itemTpl);\n      });\n  \n      item.innerHTML = '';\n      output.forEach(el => item.appendChild(el));\n    });\n  }  \n\n  createElement(html) {\n    const template = document.createElement(\"template\")\n    template.innerHTML = html.trim()\n    return template.content.firstElementChild\n  }\n\n  set(value) {\n    this.state = value\n    this.resolve()\n  }\n\n  change(name, value) {\n    this.state[name] = value\n    this.resolve()\n  }\n\n  push(name, value) {\n    this.state[name].push(value)\n    this.resolve()\n  }\n\n  get() {\n    return this.state\n  }\n\n  resolve() {\n    this.handleText()\n    this.handleConditional()\n    this.handleEach()\n  }\n\n}"],"names":["ReactivityProxy","constructor","state","Proxy","set","target","property","value","resolve","handleClick","handleChange","handleText","setElementTextOrSrc","itemPath","elements","document","querySelectorAll","join","forEach","el","hasAttribute","setAttribute","innerText","processObject","obj","path","Object","keys","key","newPath","element","addEventListener","functionName","getAttribute","fn","Function","error","console","event","handleConditional","condition","style","display","handleEach","item","output","tpl","innerHTML","expression","split","data","eval","map","itemData","itemTpl","createElement","removeAttribute","selector","e","push","appendChild","html","template","trim","content","firstElementChild","change","name","get"],"sourceRoot":""}