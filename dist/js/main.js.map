{"version":3,"file":"main.js","mappings":"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","sources":["webpack://reactivity-proxy/./lib/ReactivityProxy.js","webpack://reactivity-proxy/webpack/bootstrap","webpack://reactivity-proxy/webpack/runtime/define property getters","webpack://reactivity-proxy/webpack/runtime/hasOwnProperty shorthand","webpack://reactivity-proxy/./components/nav/nav.html","webpack://reactivity-proxy/./components/nav/nav.js","webpack://reactivity-proxy/./components/footer/footer.html","webpack://reactivity-proxy/./components/footer/footer.js","webpack://reactivity-proxy/./index.js"],"sourcesContent":["export class ReactivityProxy {\n\n  constructor() {\n    this.state = new Proxy(\n      {},\n      {\n        set:(target, property, value) => {\n          target[property] = value;\n          this.resolve()\n          return true;\n        }\n      }\n    );\n    this.handleClick()\n    this.handleChange()\n  }\n\n  handleText() {\n    const setElementTextOrSrc = (itemPath, value) => {\n      let elements = document.querySelectorAll(`[data-${itemPath.join('-')}]`);\n      elements.forEach(el => {\n        if (el.hasAttribute('src')) {\n          el.setAttribute('src', value);\n        } else if (el.hasAttribute('href')) {\n          el.setAttribute('href', value);\n        } else if (el.hasAttribute('value')) {\n          el.setAttribute('value', value);\n        } else {\n          el.innerText = value;\n        }\n      });\n    };\n  \n    const processObject = (obj, path = []) => {\n      Object.keys(obj).forEach(key => {\n        const newPath = [...path, key];\n        if (typeof obj[key] === 'object' && obj[key] !== null) {\n          processObject(obj[key], newPath); // chamada recursiva para objetos aninhados\n        } else {\n          setElementTextOrSrc(newPath, obj[key]);\n        }\n      });\n    };\n  \n    processObject(this.state);\n  }  \n\n  handleClick() {\n    document.querySelectorAll('[data-click]').forEach(element => {\n      element.addEventListener('click', () => {\n        try {\n          const functionName = element.getAttribute('data-click');\n          const fn = new Function('state', `return ${functionName}`)(this.state);\n          if (typeof fn === 'function') fn();\n        } catch (error) {\n          console.error(\"Erro em data-click:\", error);\n        }\n      });\n    });\n  }\n\n  handleChange() {\n    document.querySelectorAll('[data-change]').forEach(element => {\n      element.addEventListener('input', event => {\n        try {\n          const functionName = element.getAttribute('data-change');\n          const fn = new Function('state', `return ${functionName}`)(this.state);\n          if (typeof fn === 'function') fn(event.target.value);\n        } catch (error) {\n          console.error(\"Erro em data-change:\", error);\n        }\n      });\n    });\n  }\n\n  handleConditional() {\n    document.querySelectorAll('[data-if]').forEach(element => {\n      try {\n        const condition = new Function('state', `return ${element.getAttribute('data-if')}`);\n        element.style.display = condition(this.state) ? '' : 'none';\n      } catch (error) {\n        console.error(\"Erro em data-if:\", error);\n      }\n    });\n  }\n\n  handleEach() {\n    document.querySelectorAll('[data-for]').forEach(item => {\n      const output = [];\n      const tpl = item.innerHTML;\n      const expression = item.getAttribute('data-for').split(' of ');\n      const data = eval('this.' + expression[1]);\n  \n      if (!data) return;\n  \n      data.map(itemData => {\n        const itemTpl = this.createElement(tpl);\n        itemTpl.removeAttribute('data-for');\n  \n        const processObject = (obj, path = []) => {\n          Object.keys(obj).forEach(key => {\n            const newPath = [...path, key];\n            if (typeof obj[key] === 'object' && obj[key] !== null) {\n              processObject(obj[key], newPath);\n            } else {\n              const selector = `[data-${expression[0]}-${newPath.join('-')}]`;\n              itemTpl.querySelectorAll(selector).forEach(e => {\n                if (e.hasAttribute('src')) {\n                  e.setAttribute('src', obj[key]);\n                } else if (e.hasAttribute('href')) {\n                  e.setAttribute('href', obj[key]);\n                } else {\n                  e.innerText = obj[key];\n                }\n              });\n            }\n          });\n        };\n  \n        processObject(itemData);\n        output.push(itemTpl);\n      });\n  \n      item.innerHTML = '';\n      output.forEach(el => item.appendChild(el));\n    });\n  }  \n\n  createElement(html) {\n    const template = document.createElement(\"template\")\n    template.innerHTML = html.trim()\n    return template.content.firstElementChild\n  }\n\n  set(value) {\n    this.state = value\n    this.resolve()\n  }\n\n  change(name, value) {\n    this.state[name] = value\n    this.resolve()\n  }\n\n  push(name, value) {\n    this.state[name].push(value)\n    this.resolve()\n  }\n\n  get() {\n    return this.state\n  }\n\n  registerElements(data) {\n    this.state['elements'] = data\n  }\n\n  handleElements() {\n    if (!this.state['elements']) return\n    this.state['elements'].forEach(element => {\n      const elementName = element[0]\n      const component = element[1]\n      document.querySelectorAll(elementName).forEach(el => {\n        if (el) {\n          el.innerHTML = component.render()\n          component.init()\n          this.handleText()\n          this.handleConditional()\n          this.handleEach()\n        }\n      })\n    })\n  }\n\n  resolve() {\n    this.handleText()\n    this.handleConditional()\n    this.handleEach()\n    this.handleElements()\n  }\n\n}\n\nexport const state = new ReactivityProxy()","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// Module\nvar code = \"<nav> <ul> <li>Home</li> <li>About</li> <li data-title></li> </ul> </nav> <hr>\";\n// Exports\nexport default code;","import './nav.scss'\nimport element from './nav.html'\n\nexport const Nav = {\n  title: 'nav-tpl',\n  init() {\n    console.log('Nav element started')\n  },\n  render() {\n    return element\n  }\n}","// Module\nvar code = \"<hr> <footer> <p>Footer here</p> </footer>\";\n// Exports\nexport default code;","import './footer.scss'\nimport element from './footer.html'\n\nexport const Footer = {\n  title: 'footer-tpl',\n  init() {\n    console.log('Footer element started')\n  },\n  render() {\n    return element\n  }\n}","import { state } from './lib/ReactivityProxy.js';\n\nimport { Nav } from './components/nav/nav.js';\nimport { Footer } from './components/footer/footer.js';\n\nstate.registerElements([\n  ['nav-tpl', Nav],\n  ['footer-tpl', Footer]\n])\n\nstate.set({\n  title: 'Hello World!',\n  name: 'Jon Doe',\n  displayTitle: true,\n  productsArray: [\n    { id: 1, title: 'Product 1', price: '$10', data: { color: 'green' } },\n    { id: 2, title: 'Product 2', price: '$20', data: { color: 'blue' } },\n    { id: 3, title: 'Product 3', price: '$30', data: { color: 'black' } }\n  ],\n  users: [\n    { id: 1, name: 'Steve', email: 's@s.com' },\n    { id: 2, name: 'Other Steve', email: 'o@s.com' }\n  ],\n  car: {\n    brand: 'VW',\n    model: 'Gol',\n    year: 2010,\n    engine: 'AP 1.8',\n    color: 'blue',\n    transmission: 'manual',\n    doors: 4,\n    price: 10000,\n    image: 'https://s3.amazonaws.com/car-images-bucket/vw/gol/gol-1.jpg',\n    buyer: {\n      name: 'Victor',\n      phone: '55 11 99999-9999'\n    }\n  },\n  clickFunction() {\n    state.change('title', 'Success!');\n    state.change('name', 'Victor');\n    state.push('productsArray', { id: 4, title: 'Product 3', price: '$30', data: { color: 'pink' } })\n  },\n  changeFunction(value) {\n    state.change('title', value);\n  }\n})\n\nstate.resolve()\n\n"],"names":["ReactivityProxy","constructor","this","state","Proxy","set","target","property","value","resolve","handleClick","handleChange","handleText","processObject","obj","path","Object","keys","forEach","key","newPath","setElementTextOrSrc","itemPath","document","querySelectorAll","join","el","hasAttribute","setAttribute","innerText","element","addEventListener","functionName","getAttribute","fn","Function","error","console","event","handleConditional","condition","style","display","handleEach","item","output","tpl","innerHTML","expression","split","data","eval","map","itemData","itemTpl","createElement","removeAttribute","selector","e","push","appendChild","html","template","trim","content","firstElementChild","change","name","get","registerElements","elements","handleElements","elementName","component","render","init","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","o","defineProperty","enumerable","prop","prototype","hasOwnProperty","call","code","Nav","title","log","Footer","displayTitle","productsArray","id","price","color","users","email","car","brand","model","year","engine","transmission","doors","image","buyer","phone","clickFunction","changeFunction"],"sourceRoot":""}