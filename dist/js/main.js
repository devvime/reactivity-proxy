(()=>{"use strict";var __webpack_modules__={319:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>state});class ReactivityProxy{constructor(){this.state=new Proxy({},{set:(e,t,r)=>(e[t]=r,this.resolve(),!0)}),this.handleClick(),this.handleChange()}handleText(){const e=(t,r=[])=>{Object.keys(t).forEach((a=>{const o=[...r,a];"object"==typeof t[a]&&null!==t[a]?e(t[a],o):((e,t)=>{document.querySelectorAll(`[data-${e.join("-")}]`).forEach((e=>{e.hasAttribute("src")?e.setAttribute("src",t):e.hasAttribute("href")?e.setAttribute("href",t):e.hasAttribute("value")?e.setAttribute("value",t):e.innerText=t}))})(o,t[a])}))};e(this.state)}handleClick(){document.querySelectorAll("[data-click]").forEach((e=>{e.addEventListener("click",(()=>{try{const t=e.getAttribute("data-click"),r=new Function("state",`return ${t}`)(this.state);"function"==typeof r&&r()}catch(e){console.error("Erro em data-click:",e)}}))}))}handleChange(){document.querySelectorAll("[data-change]").forEach((e=>{e.addEventListener("input",(t=>{try{const r=e.getAttribute("data-change"),a=new Function("state",`return ${r}`)(this.state);"function"==typeof a&&a(t.target.value)}catch(e){console.error("Erro em data-change:",e)}}))}))}handleConditional(){document.querySelectorAll("[data-if]").forEach((e=>{try{const t=new Function("state",`return ${e.getAttribute("data-if")}`);e.style.display=t(this.state)?"":"none"}catch(e){console.error("Erro em data-if:",e)}}))}handleEach(){document.querySelectorAll("[data-for]").forEach((item=>{const output=[],tpl=item.innerHTML,expression=item.getAttribute("data-for").split(" of "),data=eval("this."+expression[1]);data&&(data.map((e=>{const t=this.createElement(tpl);t.removeAttribute("data-for");const r=(e,a=[])=>{Object.keys(e).forEach((o=>{const i=[...a,o];if("object"==typeof e[o]&&null!==e[o])r(e[o],i);else{const r=`[data-${expression[0]}-${i.join("-")}]`;t.querySelectorAll(r).forEach((t=>{t.hasAttribute("src")?t.setAttribute("src",e[o]):t.hasAttribute("href")?t.setAttribute("href",e[o]):t.innerText=e[o]}))}}))};r(e),output.push(t)})),item.innerHTML="",output.forEach((e=>item.appendChild(e))))}))}createElement(e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstElementChild}set(e){this.state=e,this.resolve()}change(e,t){this.state[e]=t,this.resolve()}push(e,t){this.state[e].push(t),this.resolve()}get(){return this.state}registerElements(e){this.state.elements=e}handleElements(){this.state.elements&&this.state.elements.forEach((e=>{const t=e[0],r=e[1];document.querySelectorAll(t).forEach((e=>{e&&(e.innerHTML=r.render(),r.init(),this.handleText(),this.handleConditional(),this.handleEach())}))}))}resolve(){this.handleText(),this.handleConditional(),this.handleEach(),this.handleElements()}}const state=new ReactivityProxy}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={},ReactivityProxy=__webpack_require__(319),code="<nav> <ul> <li>Home</li> <li>About</li> <li data-title></li> </ul> </nav> <hr>";const nav=code,Nav={title:"nav-tpl",init(){console.log("Nav element started")},render:()=>nav};var footer_code="<hr> <footer> <p>Footer here</p> </footer>";const footer=footer_code,Footer={title:"footer-tpl",init(){console.log("Footer element started")},render:()=>footer};ReactivityProxy.w.registerElements([["nav-tpl",Nav],["footer-tpl",Footer]]),ReactivityProxy.w.set({title:"Hello World!",name:"Jon Doe",displayTitle:!0,productsArray:[{id:1,title:"Product 1",price:"$10",data:{color:"green"}},{id:2,title:"Product 2",price:"$20",data:{color:"blue"}},{id:3,title:"Product 3",price:"$30",data:{color:"black"}}],users:[{id:1,name:"Steve",email:"s@s.com"},{id:2,name:"Other Steve",email:"o@s.com"}],car:{brand:"VW",model:"Gol",year:2010,engine:"AP 1.8",color:"blue",transmission:"manual",doors:4,price:1e4,image:"https://s3.amazonaws.com/car-images-bucket/vw/gol/gol-1.jpg",buyer:{name:"Victor",phone:"55 11 99999-9999"}},clickFunction(){ReactivityProxy.w.change("title","Success!"),ReactivityProxy.w.change("name","Victor"),ReactivityProxy.w.push("productsArray",{id:4,title:"Product 3",price:"$30",data:{color:"pink"}})},changeFunction(e){ReactivityProxy.w.change("title",e)}}),ReactivityProxy.w.resolve()})();
//# sourceMappingURL=main.js.map